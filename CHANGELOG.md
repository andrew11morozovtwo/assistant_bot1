# Changelog

## [2026-02-14] - Обновление Docker конфигурации

### Изменения

#### Dockerfile
- ✅ Изменена команда запуска с `python run_bot.py` на `python -m bot`
- ✅ Добавлено копирование `.env` файла из корня проекта в образ
- ✅ Упрощена логика создания .env файла

#### .dockerignore
- ✅ Удален `.env` из исключений (теперь копируется в образ)
- ✅ Сохранены исключения для `.env.local` и `.env.production`

#### bot.py
- ✅ Добавлено детальное логирование инициализации OpenAI клиента
- ✅ Добавлено логирование всех вызовов OpenAI API (chat.completions, audio.transcriptions)
- ✅ Логирование включает параметры запросов для отладки

#### Развертывание
- ✅ Добавлена возможность запуска контейнера от root для упрощения работы с volumes
- ✅ Обновлена документация по развертыванию на сервере

### Важные замечания

- **.env файл теперь копируется в образ** - убедитесь, что не коммитите реальные токены в git
- **Команда запуска**: `python -m bot` (вместо `python run_bot.py`)
- **Логирование**: Все обращения к OpenAI API логируются для отладки

### Миграция

При обновлении существующего развертывания:

1. Пересоберите образ с новым Dockerfile
2. Убедитесь, что `.env` файл содержит правильные токены
3. Обновите образ на сервере: `docker pull andrew11morozov/it_is_not_chanal:latest`
4. Перезапустите контейнер
